!function(){"use strict";var t=[{value:"visa",label:"Visa",info:[{start:4,length:16}]},{value:"mastercard",label:"MasterCard",info:[{start:51,length:16},{start:52,length:16},{start:53,length:16},{start:54,length:16},{start:55,length:16}]},{value:"amex",label:"American Express",info:[{start:34,length:15},{start:37,length:15}]},{value:"discover",label:"Discover",info:[{start:60,length:16},{start:62,length:16},{start:64,length:16},{start:65,length:16}]},{value:"jcb",label:"JCB",info:[{start:35,length:16}]},{value:"diners",label:"Dinners Club",info:[{start:30,length:14},{start:36,length:14},{start:38,length:14},{start:39,length:14}]},{value:"mir",label:"МИР",info:[{start:2,length:16}]}];const e="object"==typeof self?self:globalThis,s=t=>((t,s)=>{const r=(e,s)=>(t.set(s,e),e),a=n=>{if(t.has(n))return t.get(n);const[i,c]=s[n];switch(i){case 0:case-1:return r(c,n);case 1:{const t=r([],n);for(const e of c)t.push(a(e));return t}case 2:{const t=r({},n);for(const[e,s]of c)t[a(e)]=a(s);return t}case 3:return r(new Date(c),n);case 4:{const{source:t,flags:e}=c;return r(new RegExp(t,e),n)}case 5:{const t=r(new Map,n);for(const[e,s]of c)t.set(a(e),a(s));return t}case 6:{const t=r(new Set,n);for(const e of c)t.add(a(e));return t}case 7:{const{name:t,message:s}=c;return r(new e[t](s),n)}case 8:return r(BigInt(c),n);case"BigInt":return r(Object(BigInt(c)),n)}return r(new e[i](c),n)};return a})(new Map,t)(0),r="",{toString:a}={},{keys:n}=Object,i=t=>{const e=typeof t;if("object"!==e||!t)return[0,e];const s=a.call(t).slice(8,-1);switch(s){case"Array":return[1,r];case"Object":return[2,r];case"Date":return[3,r];case"RegExp":return[4,r];case"Map":return[5,r];case"Set":return[6,r]}return s.includes("Array")?[1,s]:s.includes("Error")?[7,s]:[2,s]},c=([t,e])=>0===t&&("function"===e||"symbol"===e),o=(t,{json:e,lossy:s}={})=>{const r=[];return((t,e,s,r)=>{const a=(t,e)=>{const a=r.push(t)-1;return s.set(e,a),a},o=r=>{if(s.has(r))return s.get(r);let[l,u]=i(r);switch(l){case 0:{let e=r;switch(u){case"bigint":l=8,e=r.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);e=null;break;case"undefined":return a([-1],r)}return a([l,e],r)}case 1:{if(u)return a([u,[...r]],r);const t=[],e=a([l,t],r);for(const e of r)t.push(o(e));return e}case 2:{if(u)switch(u){case"BigInt":return a([u,r.toString()],r);case"Boolean":case"Number":case"String":return a([u,r.valueOf()],r)}if(e&&"toJSON"in r)return o(r.toJSON());const s=[],d=a([l,s],r);for(const e of n(r))!t&&c(i(r[e]))||s.push([o(e),o(r[e])]);return d}case 3:return a([l,r.toISOString()],r);case 4:{const{source:t,flags:e}=r;return a([l,{source:t,flags:e}],r)}case 5:{const e=[],s=a([l,e],r);for(const[s,a]of r)(t||!c(i(s))&&!c(i(a)))&&e.push([o(s),o(a)]);return s}case 6:{const e=[],s=a([l,e],r);for(const s of r)!t&&c(i(s))||e.push(o(s));return s}}const{message:d}=r;return a([l,{name:u,message:d}],r)};return o})(!(e||s),!!e,new Map,r)(t),r};var l="function"==typeof structuredClone?(t,e)=>e&&("json"in e||"lossy"in e)?s(o(t,e)):structuredClone(t):(t,e)=>s(o(t,e));class u{constructor(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this._container=t}cardValidation(){const t=this._input.value,e=this.getPaySystem(t);var s,r;e?(s=t,r=e.info,new RegExp(`^${r.start}[0-9]{${r.length-String(r.start).length}}$`).test(s)&&function(t){let e=0,s=!1;if(t&&+t){const r=String(t).replace(/\D/g,"").split("").map(Number);for(let t=r.length-1;t>=0;t--){let a=r[t];s&&(a*=2,a>9&&(a-=9)),e+=a,s=!s}return e%10==0}return!1}(t)?(this.cleanPaySystem(),this.hideMessage(),this.showMessage(`The card is valid, ${e.label} payment system.`,"valid"),this.checkedPaySystem(e.value)):(this.cleanPaySystem(),this.showMessage("The card is not valid","invalid"))):this.showMessage("Payment system not found","invalid")}checkedPaySystem(t){this._cards.forEach((e=>{e.classList.contains(t)?e.classList.add("checked"):e.classList.add("transparent")}))}cleanPaySystem(){this._cards.forEach((t=>{t.classList.remove("checked","transparent")}))}bindToDOM(){this._container.innerHTML=u.markup,this._element=this._container.querySelector(u.selector),this._cards=this._element.querySelectorAll(u.cardSelector),this._form=this._element.querySelector(u.formSelector),this._input=this._element.querySelector(u.inputSelector),this._submitter=this._element.querySelector(u.submitterSelector),this._message=this._element.querySelector(u.messageSelector),this._input.addEventListener("input",(()=>this.showPaySystem())),this._form.addEventListener("submit",(t=>{t.preventDefault(),this.cardValidation()}))}getPaySystem(e){const s=Number(e[0]),r=Number(e[0]+e[1]),a=l(t.find((t=>{const e=t.info.map((t=>t.start));return e.includes(s)||e.includes(r)})));return a&&(a.info=a.info.find((t=>t.start===s||t.start===r))),a}hideMessage(){this._input.className="card-validator-widget__input",this._message.className="card-validator-widget__message",this._message.textContent=""}showMessage(t,e){this._input.classList.add(e),this._message.classList.add(e),this._message.textContent=t}showPaySystem(){const t=this._input.value,e=t.length;if(e<2)this.cleanPaySystem(),this.hideMessage();else if(2===e){const e=this.getPaySystem(t);e?(this.hideMessage(),this.checkedPaySystem(e.value)):this.showMessage("Payment system not found","invalid")}}static get cardSelector(){return".card-validator-widget__card"}static get formSelector(){return".card-validator-widget__form"}static get inputSelector(){return".card-validator-widget__input"}static get markup(){return'\n        <div class="card-validator-widget">\n          <h1 class="card-validator-widget__title">Credit Card Validator</h1>\n          <ul class="card-validator-widget__cards">\n      '+t.map((t=>`\n            <li class="card-validator-widget__card ${t.value}">\n              <span class="visually-hidden">${t.label}</span>\n            </li>\n          `)).join("")+'\n          </ul>\n          <form class="card-validator-widget__form">\n            <input class="card-validator-widget__input" placeholder="Credit card number" type="text">\n            <button class="card-validator-widget__btn" type="submit">Click to Validate</button>\n          </form>\n          <p class="card-validator-widget__message"></p>\n        </div>\n      '}static get messageSelector(){return".card-validator-widget__message"}static get selector(){return".card-validator-widget"}static get submitterSelector(){return".card-validator-widget__btn"}}const d=document.querySelector("#app");new u(d).bindToDOM()}();